<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ÙƒØ±Ù…Ù„Ø§Øª | ÙƒØ´ÙˆÙ Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± ğŸ­</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --p: #ff007f; --s: #00d4ff; --a: #ccff00; --bg: #050505;
        }
        body {
            margin: 0; background: var(--bg); color: #fff;
            font-family: 'Cairo', sans-serif; overflow-x: hidden;
            background-image: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            min-height: 100vh;
        }
        .header {
            text-align: center; padding: 40px 20px;
            background: rgba(255, 0, 127, 0.1);
            border-bottom: 2px solid var(--p);
            box-shadow: 0 10px 30px rgba(255, 0, 127, 0.2);
        }
        .header h1 { font-family: 'Orbitron'; font-size: 2.5rem; margin: 0; color: var(--p); text-shadow: 0 0 15px var(--p); }
        .header p { color: var(--s); font-weight: 900; letter-spacing: 2px; }

        .stats-bar {
            display: flex; justify-content: center; gap: 20px; margin: -25px auto 30px;
            max-width: 300px;
        }
        .stat-card {
            background: #fff; color: #000; padding: 10px 20px; border-radius: 15px;
            font-weight: 900; box-shadow: 0 5px 15px var(--a);
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ */
        .entries-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .user-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px; padding: 20px;
            backdrop-filter: blur(10px);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; position: relative; overflow: hidden;
            text-align: center;
        }
        .user-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--p), var(--s));
        }
        .user-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--s);
            box-shadow: 0 15px 30px rgba(0, 212, 255, 0.2);
        }

        .user-name { font-size: 1.3rem; font-weight: 900; color: #fff; margin-bottom: 10px; }
        .user-phone { 
            display: none; background: var(--a); color: #000; 
            padding: 8px; border-radius: 10px; font-weight: 900;
            margin-top: 15px; animation: slideIn 0.3s forwards;
        }
        .user-time { font-size: 0.7rem; color: #888; margin-top: 10px; }

        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Ù„ÙˆØ¯Ù†Ø¬ */
        #loader { text-align: center; padding: 50px; font-size: 2rem; color: var(--p); }
        
        .empty-msg { text-align: center; grid-column: 1/-1; padding: 50px; color: #555; font-size: 1.5rem; }
    </style>
</head>
<body>

<div class="header">
    <h1>KRAMLAT ADMIN</h1>
    <p>ÙƒØ´ÙˆÙ Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ğŸ­</p>
</div>

<div class="stats-bar">
    <div class="stat-card">Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†: <span id="totalCount">0</span></div>
</div>

<div class="container">
    <div id="loader"><i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ±...</div>
    <div class="entries-grid" id="entriesGrid"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>

<script>
    // Ù†ÙØ³ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ§ÙŠØ±Ø¨Ø§Ø² Ø¨ØªØ§Ø¹ØªÙƒ
    const firebaseConfig = {
        apiKey: "AIzaSyCZr_OpkCfEFxeTrOc5fp7F_uvyVGlT5Yc",
        authDomain: "karamlat-99e6e.firebaseapp.com",
        databaseURL: "https://karamlat-99e6e-default-rtdb.firebaseio.com",
        projectId: "karamlat-99e6e",
        storageBucket: "karamlat-99e6e.firebasestorage.app",
        messagingSenderId: "817474436731",
        appId: "1:817474436731:web:6b4c38fd98048f1a3b6cde"
    };
    firebase.initializeApp(firebaseConfig);
    const rtdb = firebase.database();

    const grid = document.getElementById('entriesGrid');
    const loader = document.getElementById('loader');
    const totalCount = document.getElementById('totalCount');

    // Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    rtdb.ref('contest_entries').on('value', (snapshot) => {
        loader.style.display = 'none';
        grid.innerHTML = '';
        const data = snapshot.val();
        
        if (data) {
            const entries = Object.values(data).reverse(); // Ø§Ù„Ø£Ø­Ø¯Ø« ÙŠØ¸Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„
            totalCount.innerText = entries.length;

            entries.forEach(entry => {
                const card = document.createElement('div');
                card.className = 'user-card';
                card.onclick = function() {
                    const phone = this.querySelector('.user-phone');
                    phone.style.display = (phone.style.display === 'block') ? 'none' : 'block';
                };

                card.innerHTML = `
                    <div class="user-name"><i class="fas fa-user-crown" style="color:var(--p)"></i> ${entry.name}</div>
                    <div class="user-phone"><i class="fab fa-whatsapp"></i> ${entry.phone}</div>
                    <div class="user-time">${entry.time || 'ÙˆÙ‚Øª ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
                `;
                grid.appendChild(card);
            });
        } else {
            grid.innerHTML = '<div class="empty-msg">Ù„Ø³Ù‡ Ù…ÙÙŠØ´ Ø£Ø³Ø§Ø·ÙŠØ± Ø³Ø¬Ù„ÙˆØ§.. Ø§Ù†Ø´Ø± Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ§ ÙƒÙŠÙ†Ø¬! ğŸš€</div>';
            totalCount.innerText = "0";
        }
    });
</script>

</body>
</html>
